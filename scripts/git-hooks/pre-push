#!/bin/bash
#
# Pre-push hook for InsightSpike-AI
# 
# This hook validates the project state before pushing to remote repository.
# Includes data consistency checks and automated validation tests.
#
# Installation:
#   cp scripts/git-hooks/pre-push .git/hooks/pre-push
#   chmod +x .git/hooks/pre-push
#

echo "üöÄ InsightSpike-AI Pre-Push Validation"
echo "======================================"

# Run the comprehensive pre-push validation
echo "Running comprehensive validation pipeline..."
python scripts/pre_push_validation.py

# Capture exit code
VALIDATION_RESULT=$?

if [ $VALIDATION_RESULT -eq 0 ]; then
    echo ""
    echo "‚úÖ Pre-push validation PASSED"
    echo "üéâ Ready to push to repository!"
    exit 0
else
    echo ""
    echo "‚ùå Pre-push validation FAILED"
    echo "‚ö†Ô∏è  Please resolve issues before pushing:"
    echo "   - Check data consistency"
    echo "   - Verify test results"
    echo "   - Review validation output"
    echo ""
    echo "To bypass this hook (not recommended):"
    echo "   git push --no-verify"
    exit 1
fi
