# エピソード分裂・統合・忘却に関する議論メモ (2025-01-25)

## 背景
数学概念進化実験v2でエピソード分裂は観察されたが、統合（マージ）は一度も発生しなかった。この現象から、エピソード処理メカニズムの本質について再考察を行った。

## 主要な発見と洞察

### 1. 仮説洞察エピソードの命名問題
- 現在の実装では `[INSIGHT]` プレフィックスを使用
- 「仮説洞察エピソード」(hypothesis insight episode) という用語は未使用
- InsightFactRegistryで洞察を管理しているが、自動生成ロジックが論文に記載されていない

### 2. 質問と事実の区別問題
**現状の問題**:
- 質問も事実も同じ「エピソード」として扱われる
- 質問を仮エピソードとして追加してgeDIG評価を実行
- スパイク検出後も質問は変質しない（メッセージパッシング未実装）

**重要な指摘**:
- 事実をメッセージパッシングで変成させてはいけない
- 質問は探索的なので変質してもOK（むしろ洞察への道筋）
- 「話半分」で聞く人間の知恵 → エピソード分裂として実装可能

### 3. 統合 vs 結合 vs 結線
**統合 (Integration/Merge)**:
- 2つが1つになる、元の情報が失われる
- 実験で起きなかった理由：
  1. 100エピソード以上必要（実験は最大50個）
  2. 95%以上の類似度が必要
  3. そもそも条件が厳しすぎる

**結合 (Connection/Link)**:
- 2つは別々のまま関連付けられる
- 「あの話似てるなぁ」という人間の認知に近い
- 元の情報は保持される

**結線 (Edge)**:
- 現在のInsightSpikeですでに実装済み
- グラフのエッジで関連性を表現
- ほとんどのケースはこれで解決可能

### 4. 統合機能の必要性再考
**統合のメリット（理論上）**:
1. メモリ効率
2. ノイズ除去  
3. 知識の洗練

**しかし人間の記憶では**:
1. 「水は液体」→ 個別エピソードを複数思い出す（統合ではなく忘却）
2. 「太陽は東から昇る」→ Layer1のスキップで十分
3. 「鳥は飛ぶ」＋「鳥には羽がある」→ 洞察エピソードの生成（元は残す）

**結論**: 統合は不要、むしろ有害。代わりに必要なのは：
- 適切な忘却メカニズム
- 洞察エピソードの自動生成

### 5. 忘却メカニズムの課題
**主要な仮説**:
1. エビングハウスの忘却曲線（時間経過で指数関数的）
2. 干渉説（新旧情報の相互作用）
3. 減衰説（物理的消失）
4. 適応的忘却（バグではなく機能）
5. 予測符号化での忘却（予測誤差が小さい=忘れてOK）

**結論**: 決定的なメカニズムは不明。実装は棚上げし、まず分裂と洞察生成に注力。

## 今後の方向性

1. **エピソード分裂**: 継続的に改良（人間の「話半分」認知を模倣）
2. **エピソード統合**: 削除または大幅見直し
3. **洞察生成**: 自動生成メカニズムの実装
4. **忘却**: 将来的な研究課題として棚上げ

## 実装への示唆

```python
# エピソードタイプの明確化
class Episode:
    text: str
    episode_type: str  # "fact", "query", "insight"
    is_mutable: bool   # 事実はFalse、質問はTrue
    
# 洞察エピソードの自動生成
def generate_insight_episode(episode_a, episode_b, connection_strength):
    if connection_strength > INSIGHT_THRESHOLD:
        return Episode(
            text=f"[INSIGHT] {synthesize(episode_a, episode_b)}",
            episode_type="insight",
            source_episodes=[episode_a.id, episode_b.id]
        )
```

## 参考
- 実験結果: `/experiments/mathematical_concept_evolution_v2/`
- 関連コード: `/src/insightspike/detection/insight_registry.py`
- 論文: `/docs/paper/geDIG_paper_ja.tex`