# Experiment 5: スケーラブルグラフ成長実験

## 実験目的
experiment_4と同じ動的グラフ成長を、今度は**FAISSベースのScalableGraphBuilder**で実現する：
1. O(n²)からO(n log n)への計算量改善の実証
2. 5000件以上のデータセットでの大規模実験
3. パフォーマンスとメモリ効率の定量評価
4. 10万エピソード以上への拡張可能性の検証

## 主要な改善点
- **ScalableGraphBuilder**: FAISSによる高速近似最近傍探索
- **topK制限**: 各ノード最大50接続（全結合を回避）
- **バッチ処理**: メモリ効率的な処理
- **インクリメンタル更新**: 全再構築の回避

## 実験計画

### Phase 1: パフォーマンス比較（300ドキュメント）
1. experiment_4と同じ300件のデータセットで比較
2. グラフ構築時間の測定と比較
3. エッジ数とグラフ密度の分析
4. メモリ使用量の追跡

### Phase 2: 大規模実験（5000ドキュメント）
1. 5000件の多様なテキストデータを生成
2. バッチ処理（100件ずつ）で効率的に追加
3. グラフ成長のスケーラビリティを検証
4. 構築時間の線形性を確認

### Phase 3: スケーラビリティ分析
1. グラフ密度の推移を分析
2. O(n log n)複雑度の実証
3. 10万、100万ノードへの投射
4. メモリ使用量の予測

## 技術的実装のポイント

### FAISSによる効率化
```python
# ScalableGraphBuilderの核心部分
self.index = faiss.IndexFlatIP(384)  # 内積ベースの高速検索
distances, neighbors = self.index.search(embeddings, top_k)
```

### topK制限による密度制御
- 各ノード最大50接続
- 全結合の回避（300ノードで最大15,000エッジ vs 44,850）
- 意味的に関連の高いノードのみ接続

## 期待される成果
1. **劇的な高速化**: 1000ノード以上で10倍以上の高速化
2. **線形的スケーラビリティ**: O(n log n)の実証
3. **メモリ効率**: 疎グラフによるメモリ節約
4. **実用性**: Wiki全文やマルチモーダルデータへの対応可能性

## 成功基準
- [ ] 300ドキュメントで2倍以上の高速化
- [ ] 5000ドキュメントを正常に処理
- [ ] グラフ構築時間がO(n log n)に従う
- [ ] 10万ノードへの拡張可能性を実証