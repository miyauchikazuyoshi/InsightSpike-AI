# エピソード記憶とメッセージパッシング実験の分析

## 実験の経過

### 1. 初期実装の問題
- 位置ノードとエピソードを混同していた
- エピソード自体をノードとして扱うべきという指摘を受けて修正

### 2. ループ問題
- 既知の位置間を無限に往復する問題が発生
- 原因：同じ移動エピソードが累積してスコアが高くなりすぎる

### 3. 解決アプローチ
1. **ループ検出と訪問回数によるペナルティ** → 効果的でなかった
2. **既知情報の管理** → 部分的に成功
   - (位置, 行動) → 結果 を記録
   - 未探索の行動を優先
   - 全て既知の場合はランダム選択

## 現在の課題

### 1. ゴールへの方向性の欠如
- ランダムな探索では効率が悪い
- ゴール情報エピソードが活用されていない

### 2. メッセージパッシングの効果不足
- 行き止まり情報は伝播するが、活用されていない
- ゴール方向の情報が伝わらない

## 改善案

### 1. ゴール情報の活用
- 類似度検索でゴール位置との距離を考慮
- ゴールに近づく方向を優先

### 2. メッセージパッシングの改善
- 成功経路の価値を高める
- 失敗経路の価値を下げる
- 経路全体でのメッセージ伝播

### 3. 探索と活用のバランス
- 未探索を優先しつつ、既知の良い経路も活用
- ε-greedy的なアプローチ

## geDIGの本質

ユーザーの指摘通り：
- エピソード自体がノード
- メッセージパッシングで失敗/成功情報を接続
- ペナルティ設計は不要
- プロセス：クエリ注入→類似度検索→メッセージパッシング→決定→移動→保存→繰り返し

この流れを正しく実装することが重要。