# エピソード記憶とメッセージパッシング実験まとめ

## 実験の目的
geDIG（Graph Edit Distance + Information Gain）アルゴリズムを用いて、エピソード記憶とメッセージパッシングによる迷路ナビゲーションを実現する。

## 重要な概念
- **エピソードをノードとして扱う**: 位置ではなく、移動エピソード自体をグラフのノードとする
- **異物なエントロピー**: 行き止まりや行動不能を異常状態として扱い、その情報を伝播
- **Information Gain = -|異物なエントロピーへの近接度|**

## 実装したバリエーション

### 1. simple_episode_navigator.py
- 基本実装
- 位置ベースのアプローチ（後に問題があることが判明）

### 2. episode_as_node_navigator.py  
- エピソードをノードとして扱う改良版
- 訪問位置のトラッキング

### 3. gedig_episode_navigator.py
- 異物なエントロピーの実装
- メッセージパッシングによる伝播
- ゴール方向の考慮

### 4. gedig_frontier_navigator.py
- フロンティア探索の追加
- 未探索領域への誘導

## 発見された問題

### ループ問題
全ての実装で、特定の位置間で無限ループが発生：
- (2,1) ↔ (3,1) の往復
- (6,5) ↔ (7,5) の往復

### 原因
1. 未探索領域への経路探索が正しく機能していない
2. 経路の連続性が保たれていない
3. 局所的な最適化に陥っている

## 成功した部分

### 異物なエントロピーの概念
- 行き止まりを「異物なエントロピー」として定義
- メッセージパッシングで周辺エピソードに伝播
- 行き止まり回避の判断材料として活用

### エピソードグラフの可視化
- 移動軌跡と知識グラフの同時表示
- 異物なエントロピーの視覚化（色分け）

## 今後の改善案

1. **グローバルな経路計画**: 局所的な判断だけでなく、全体的な経路を考慮
2. **探索と活用のバランス**: ε-greedy戦略の導入
3. **階層的な記憶構造**: 詳細なエピソードと抽象的な領域知識の組み合わせ
4. **強化学習との統合**: 価値関数の学習による長期的な最適化

## 実験から得られた洞察

1. **エピソード記憶の重要性**: 単なる状態遷移ではなく、経験そのものを記憶することの価値
2. **失敗情報の活用**: 行き止まりや壁の情報も貴重な知識
3. **メッセージパッシングの有効性**: 局所的な情報を大域的に伝播させる仕組み
4. **適切な抽象化レベル**: 位置ベースではなくエピソードベースの表現の優位性

## 結論

geDIGアルゴリズムの基本的な実装は成功したが、実用的なナビゲーションにはさらなる改良が必要。特に、探索戦略の改善と長期的な目標追求のメカニズムが重要となる。